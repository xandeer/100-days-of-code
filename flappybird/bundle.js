!function(t){function i(e){if(s[e])return s[e].exports;var n=s[e]={exports:{},id:e,loaded:!1};return t[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var s={};return i.m=t,i.c=s,i.p="/100-days-of-code/flappybird/",i(0)}([function(t,i,s){t.exports=s(7)},function(t,i,s){(function(){function s(){this.MAX_SPEED=.5,this.MAX_ANGLE=30,this.index=0,this.a=5e-4,this.curAngle=0,this.listeners=[]}s.prototype={constructor:s,init:function(t){this.img=t.img,this.imgH=this.img.height,this.imgW=this.img.width/3,this.landH=t.landH,this.ctx=t.ctx,this.speed=t.speed||100,this.raiseSpeed=t.raiseSpeed,this.x=100,this.y=100},render:function(t){this.ctx.save(),this.speed>this.MAX_SPEED?this.speed=this.MAX_SPEED:this.speed<-this.MAX_SPEED&&(this.speed=-this.MAX_SPEED),this.curAngle=this.speed/this.MAX_SPEED*this.MAX_ANGLE,this.ctx.translate(this.x,this.y),this.ctx.rotate(this.curAngle/180*Math.PI),this.ctx.drawImage(this.img,parseInt(this.index++/5)*this.imgW,0,this.imgW,this.imgH,-.5*this.imgW,-.5*this.imgH,this.imgW,this.imgH),this.isDied()&&this.trigger(),this.index%=15,this.y+=this.speed*t+.5*this.a*t*t,this.speed+=this.a*t,this.ctx.restore()},isDied:function(){return!!(this.isOverSky()||this.isFallToGround()||this.isCrashedPipe())},isOverSky:function(){return this.y<=1*this.imgH/3},isFallToGround:function(){return this.y>=this.landH-1*this.imgH/3},isCrashedPipe:function(){var t=this.y;if(t+=this.speed>0?this.imgW/5:-this.imgW/5,this.ctx.isPointInPath(this.x+this.imgW/5,t))return!0},addListener:function(t){this.listeners.push(t)},trigger:function(){this.listeners.forEach(function(t){t&&t()})},raise:function(){this.speed=-this.raiseSpeed}},"undefined"!=typeof t&&t.exports&&(i=t.exports=s),i.Bird=s}).call(this)},function(t,i){(function(){var i=["birds","land","pipe1","pipe2","sky"],s=i.map(function(t){return{name:t,src:"./img/"+t+".png"}});t.exports={imgSrcs:s,bgSpeed:.15,fallSpeed:150,raiseSpeed:.3}}).call(this)},function(t,i,s){(function(){function e(){this.cv=document.getElementById("flappy-canvas"),this.cv.width=800,this.cv.height=600,this.btn=document.getElementById("flappy-play"),this.status=document.getElementById("flappy-status"),this.msg=document.getElementById("flappy-msg"),this.ctx=this.cv.getContext("2d"),this.imgs={},this.isPlaying=!1,this.isOver=!1,this.delta=0,this.bird=new r,this.sky=new h,this.land=new o,this.pipes=new a,this.roles={sky:this.sky,pipes:this.pipes,land:this.land,birds:this.bird}}var n=s(2),r=s(1),h=s(6),o=s(4),a=s(5);e.prototype={constructor:e,init:function(){this.score=0,this.sky.init({ctx:this.ctx,img:this.imgs.sky,speed:n.bgSpeed}),this.land.init({ctx:this.ctx,img:this.imgs.land,canvasH:this.cv.height,speed:n.bgSpeed}),this.pipes.init({ctx:this.ctx,canvasH:this.cv.height,canvasW:this.cv.width,imgTop:this.imgs.pipe2,imgBottom:this.imgs.pipe1,speed:n.bgSpeed}),this.bird.init({ctx:this.ctx,img:this.imgs.birds,landH:this.cv.height-this.land.imgH,speed:n.fallSpeed,raiseSpeed:n.raiseSpeed})},renderScore:function(t){this.ctx.save(),this.ctx.font="30px serif",this.ctx.fillStyle="white",this.score+=t/1e3,this.ctx.translate(this.cv.width-200,50),this.ctx.fillText("Score: "+this.score.toFixed(2)+"s",0,0),this.ctx.restore()},start:function(){this.status.classList.remove("flappy_show"),this.isPlaying=!0},pause:function(){this.isPlaying=!1,this.msg.innerHTML="Pausing",this.status.classList.add("flappy_show"),this.btn.innerHTML="Resume"},restart:function(){this.init(),this.isOver=!1,this.msg.classList.remove("flappy-msg_over"),this.start()},ready:function(){var t=this;this.preLoadImages(n.imgSrcs,function(){t.status.classList.add("flappy_show"),t.init(),t.registerEvents(),t.bird.addListener(function(){t.gameOver()});var i=0,s=new Date-0,e=function(){var n=new Date-0;if(i=n-s,s=n,t.isPlaying){t.ctx.clearRect(0,0,t.cv.width,t.cv.height),t.ctx.beginPath();for(var r in t.roles)t.roles[r].render(i);t.renderScore(i)}window.requestAnimationFrame(e)};window.requestAnimationFrame(e)})},registerEvents:function(){var t=this;this.cv.addEventListener("click",function(){t.bird.raise()}),this.btn.addEventListener("click",function(){t.status.classList.contains("flappy_show")&&(t.msg.classList.contains("flappy-msg_over")?t.restart():t.start())}),document.addEventListener("keydown",function(i){switch(i.keyCode){case 32:t.isPlaying?t.pause():t.isOver?t.restart():t.start()}})},gameOver:function(){this.isPlaying=!1,this.isOver=!0,this.btn.innerHTML="Restart",this.msg.innerHTML="Game Over",this.msg.classList.add("flappy-msg_over"),this.status.classList.add("flappy_show")},preLoadImages:function(t,i){for(var s,e=t.length,n=0,r=0;r<e;r++)s=new Image,s.src=t[r].src,this.imgs[t[r].name]=s,s.onload=function(){n++,n==e&&(console.log("Loading images success."),i&&i())}}};var c=function(){var t;return function(){return t||(t=new e)}}();"undefined"!=typeof t&&t.exports&&(i=t.exports=c),i.FlappyBird=c}).call(this)},function(t,i){(function(){function i(){this.x=0}i.prototype={constructor:i,init:function(t){this.img=t.img,this.imgW=this.img.width,this.imgH=this.img.height,this.canvasH=t.canvasH,this.ctx=t.ctx,this.speed=t.speed||.1},render:function(t){this.ctx.save(),this.ctx.translate(-this.x,0);for(var i=0;i<4;i++)this.ctx.drawImage(this.img,this.imgW*i,this.canvasH-this.imgH);this.x+=this.speed*t,this.x>=this.imgW&&(this.x=0),this.ctx.restore()}},t.exports=i}).call(this)},function(t,i){(function(){function i(t){}function s(){this.lists=[],this.length=6;for(var t=0;t<this.length;t++){var s=new i;this.lists.push(s)}}i.prototype={constructor:i,init:function(t){this.ctx=t.ctx,this.imgTop=t.imgTop,this.imgBottom=t.imgBottom,this.width=this.imgTop.width,this.height=this.imgTop.height,this.canvasH=t.canvasH,this.MIN_HEIGHT=50,this.MAX_HEIGHT=250,this.x=t.x||0,this.gapY=150,this.topY=-300,this.bottomY=this.gapY+this.MAX_HEIGHT+this.topY},render:function(){this.ctx.save(),this.ctx.drawImage(this.imgTop,this.x,this.topY),this.ctx.drawImage(this.imgBottom,this.x,this.bottomY),this.ctx.restore()},setRandomY:function(){var t=Math.floor(Math.random()*(this.MAX_HEIGHT-this.MIN_HEIGHT)+this.MIN_HEIGHT);this.topY=-this.imgTop.height+t,this.bottomY=this.topY+this.imgTop.height+this.gapY},drawRect:function(){this.ctx.rect(this.x,this.topY,this.width,this.height),this.ctx.rect(this.x,this.bottomY,this.width,this.height)}},s.prototype={constructor:s,init:function(t){var i=this;this.speed=t.speed||.1,this.canvasW=t.canvasW,this.gap=this.canvasW/(this.length-1)-t.imgTop.width,this.lists.forEach(function(s,e){s.init({ctx:t.ctx,imgTop:t.imgTop,imgBottom:t.imgBottom,canvasH:t.canvasH,x:(i.gap+t.imgTop.width)*(e+2)}),s.setRandomY()})},render:function(t){for(var i,s=0;s<this.length;s++)i=this.lists[s],i.x-=this.speed*t,i.x<=-i.width&&(i.x+=this.canvasW+this.gap+i.width,i.setRandomY()),i.drawRect(),i.render()}},t.exports=s}).call(this)},function(t,i){(function(){function i(){this.x=0}i.prototype={constructor:i,init:function(t){this.img=t.img,this.imgW=this.img.width,this.imgH=this.img.height,this.ctx=t.ctx,this.speed=t.speed||.1},render:function(t){this.ctx.save(),this.ctx.translate(-this.x,0);for(var i=0;i<2;i++)this.ctx.drawImage(this.img,this.imgW*i,0);this.x+=this.speed*t,this.x>=this.imgW&&(this.x=0),this.ctx.restore()}},t.exports=i}).call(this)},function(t,i,s){s(11);var e=s(3);window.onload=function(){var t=e();t.ready()}},function(t,i,s){i=t.exports=s(9)(),i.push([t.id,"body{position:relative;height:97vh}.flappy{width:800px;height:600px;top:50%;transform:translate(-50%,-50%);background-image:url("+s(12)+");background-size:cover}.flappy,.flappy-status{position:absolute;left:50%}.flappy-status{width:150px;height:100px;background-color:hsla(0,0%,9%,.45);text-align:center;border-radius:10px;top:25%;transform:translateX(-50%);display:none}.flappy_show{display:block}.flappy-btn{border-radius:10px;font-size:23px;top:45%;transform:translate(-50%);background-color:RGBA(184,196,127,1);color:#fff;border-style:none}.flappy-btn,.flappy-msg{width:100px;height:50px;position:absolute;left:50%}.flappy-msg{line-height:50px;font-size:20px;font-weight:700;transform:translateX(-50%)}.flappy-msg_over{color:red}",""])},function(t,i){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],i=0;i<this.length;i++){var s=this[i];s[2]?t.push("@media "+s[2]+"{"+s[1]+"}"):t.push(s[1])}return t.join("")},t.i=function(i,s){"string"==typeof i&&(i=[[null,i,""]]);for(var e={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(e[r]=!0)}for(n=0;n<i.length;n++){var h=i[n];"number"==typeof h[0]&&e[h[0]]||(s&&!h[2]?h[2]=s:s&&(h[2]="("+h[2]+") and ("+s+")"),t.push(h))}},t}},function(t,i,s){function e(t,i){for(var s=0;s<t.length;s++){var e=t[s],n=l[e.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](e.parts[r]);for(;r<e.parts.length;r++)n.parts.push(c(e.parts[r],i))}else{for(var h=[],r=0;r<e.parts.length;r++)h.push(c(e.parts[r],i));l[e.id]={id:e.id,refs:1,parts:h}}}}function n(t){for(var i=[],s={},e=0;e<t.length;e++){var n=t[e],r=n[0],h=n[1],o=n[2],a=n[3],c={css:h,media:o,sourceMap:a};s[r]?s[r].parts.push(c):i.push(s[r]={id:r,parts:[c]})}return i}function r(t,i){var s=m(),e=y[y.length-1];if("top"===t.insertAt)e?e.nextSibling?s.insertBefore(i,e.nextSibling):s.appendChild(i):s.insertBefore(i,s.firstChild),y.push(i);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");s.appendChild(i)}}function h(t){t.parentNode.removeChild(t);var i=y.indexOf(t);i>=0&&y.splice(i,1)}function o(t){var i=document.createElement("style");return i.type="text/css",r(t,i),i}function a(t){var i=document.createElement("link");return i.rel="stylesheet",r(t,i),i}function c(t,i){var s,e,n;if(i.singleton){var r=x++;s=v||(v=o(i)),e=p.bind(null,s,r,!1),n=p.bind(null,s,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(s=a(i),e=f.bind(null,s),n=function(){h(s),s.href&&URL.revokeObjectURL(s.href)}):(s=o(i),e=d.bind(null,s),n=function(){h(s)});return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}function p(t,i,s,e){var n=s?"":e.css;if(t.styleSheet)t.styleSheet.cssText=b(i,n);else{var r=document.createTextNode(n),h=t.childNodes;h[i]&&t.removeChild(h[i]),h.length?t.insertBefore(r,h[i]):t.appendChild(r)}}function d(t,i){var s=i.css,e=i.media;if(e&&t.setAttribute("media",e),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}function f(t,i){var s=i.css,e=i.sourceMap;e&&(s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */");var n=new Blob([s],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(n),r&&URL.revokeObjectURL(r)}var l={},u=function(t){var i;return function(){return"undefined"==typeof i&&(i=t.apply(this,arguments)),i}},g=u(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=u(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,x=0,y=[];t.exports=function(t,i){i=i||{},"undefined"==typeof i.singleton&&(i.singleton=g()),"undefined"==typeof i.insertAt&&(i.insertAt="bottom");var s=n(t);return e(s,i),function(t){for(var r=[],h=0;h<s.length;h++){var o=s[h],a=l[o.id];a.refs--,r.push(a)}if(t){var c=n(t);e(c,i)}for(var h=0;h<r.length;h++){var a=r[h];if(0===a.refs){for(var p=0;p<a.parts.length;p++)a.parts[p]();delete l[a.id]}}}};var b=function(){var t=[];return function(i,s){return t[i]=s,t.filter(Boolean).join("\n")}}()},function(t,i,s){var e=s(8);"string"==typeof e&&(e=[[t.id,e,""]]),s(10)(e,{}),e.locals&&(t.exports=e.locals)},function(t,i,s){t.exports=s.p+"7951f63e67e3a6741bd79c04e1a69e62.png"}]);
//# sourceMappingURL=bundle.js.map